<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Тест геолокации</title>
</head>
<body>
  <h1>Тест геолокации</h1>
  <button onclick="sendLocation()">Отправить геолокацию</button>

  <script>
    const WEBHOOK_URL = 'https://webhook.site/3038f7cb-b8c9-463e-b74c-43cace83af30';

    function sendLocation() {
      if (!navigator.geolocation) {
        alert('Геолокация не поддерживается вашим браузером');
        return;
      }
      navigator.geolocation.getCurrentPosition(position => {
        fetch(WEBHOOK_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            latitude: position.coords.latitude,
            longitude: position.coords.longitude,
            timestamp: position.timestamp
          })
        })
        .then(() => alert('Координаты отправлены!'))
        .catch(err => {
          alert('Ошибка отправки: ' + err);
          console.error('Fetch error:', err);
        });
      }, err => alert('Ошибка геолокации: ' + err.message));
    }
  </script>
</body>
</html>
